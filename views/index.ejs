<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.css' />
  </head>
  <body>
    <h1>交通費メモ閲覧</h1>
    <!-- 前月データへ移動 -->
    <p><a href="#">前月データへ</a></p>
    <div class="container">
      <h2><%= section1 %></h2>
      <button class="btn btn-primary" id="users">新規パターンを追加</button>
      <table class="table">
        <tr>
          <th>No.</th>
          <th>申請</th>
          <th>経路</th>
          <th>手段</th>
          <th>費用</th>
          <th>回数</th>
          <th>ジョブ情報</th>
          <th>メモ</th>
          <th>詳細</th>
          <th>片道</th>
          <th>往復</th>
        </tr>
        <% for(let i in shuppatsu){ %> 
        <tr>
          <form method="POST" action="/">
            <div class="form-group">
              <td id="id"><%- id[i] %> </td>
              <td id="checkbox"><input type="checkbox" name="申請" id="sinsei"></td>
              <td id="keiro"><%- shuppatsu[i] %> ～<%- totyaku[i] %> </td>
              <td id="shudan"><%- shudan[i] %> </td>
              <td id="money"><%- money[i] %> </td>
              <td id="times"><%- times[i] %> </td>
              <td id="job"><%- job[i] %> </td>
              <td id="memo"><%- memo[i] %> </td>
              <input type="hidden" name="id" value="<%- id[i] %> ">
              <td><a class="btn btn-primary" href="javascript:detail(<%= id[i],shuppatsu[i].id,totyaku[i],shudan[i],money[i],times[i],job[i],memo[i] %> );">詳細</a></td>
              <td><button>片道</button></td>
              <td><button>往復</button></td>  
            </div>
          </form>
        </tr>
        <% } %> 
      </table>
    </div>
    <div class="container">
      <h2><%= section2 %></h2>
      <button class="btn btn-primary" id="detail">新規レコードを追加</button>
      <table class="table">
        <tr>
          <th>No.</th>
          <th>申請</th>
          <th>日付</th>
          <th>経路</th>
          <th>手段</th>
          <th>費用</th>
          <th>回数</th>
          <th>ジョブ情報</th>
          <th>メモ</th>
          <th>詳細</th>
          <th>コピー</th>
        </tr>
        <% for(let i in shuppatsu){ %> 
        <tr>
          <td id="number"><%- id[i] %> </td>
          <td id="checkbox"><input type="checkbox" name="申請" id="sinsei"></td>
          <td id="date"><%- date[i] %> </td>
          <td id="keiro"><%- shuppatsu[i] %> ～<%- totyaku[i] %></td>
          <td id="shudan"><%- shudan[i] %></td>
          <td id="money"><%- money[i] %></td>
          <td id="times"><%- times[i] %></td>
          <td id="job"><%- job[i] %></td>
          <td id="memo"><%- memo[i] %></td>
          <td><a class="btn btn-primary" href="javascript:detail(<%= id[i],shuppatsu[i].id,totyaku[i],shudan[i],money[i],times[i],job[i],memo[i] %> );">詳細</a></td>
          <td><a class="btn btn-primary" href="javascript:copy(<%= id[i],shuppatsu[i].text,totyaku[i],shudan[i],money[i],times[i],job[i],memo[i] %> );">コピー</a></td>
        </tr>
        <% } %> 
      </table>
    </div>
  </body>
  <script>
    'use strict';
    document.getElementById("users").onclick=function(){
      document.location="/users";//ユーザー設定ページへ
    }
    document.getElementById("detail").onclick=function(){
      document.location="/detail";//詳細設定ページへ
    }
    function detail(id,shuppatsu,totyaku,shudan,money,times,job,memo){
      document.location="/detail";
    }
    function copy(id,shuppatsu,totyaku,shudan,money,times,job,memo){
      let result= window.confirm("以下のメモをコピーしますか？\n"+"経路："+shuppatsu+"~"+totyaku+"\n手段："+shudan+"\n費用："+money+"\n回数："+times+"\nジョブ情報："+job+"\nメモ："+memo);
    }
  </script>
</html>
